'use client'

import {
  useFavoriteAddBatch,
  useFavoriteDeleteBatch,
  useFavoriteMoveBatch,
  WatchLaterIds,
} from '@/features'
import WatchLaterSelectFilterBtn from '@/features/watch-later/components/WatchLaterSelectFilterBtn'
import WatchLaterDialog from '@/features/watch-later/components/WatchLaterDialog'
import { toast } from '@/lib'
import WatchLaterFavoriteFolderDialog from '@/features/watch-later/components/WatchLaterFavoriteFolderDialog'

const WatchLaterSelectFilterBtnWrapper = ({ ids }: { ids: WatchLaterIds }) => {
  const { favoriteDelete } = useFavoriteDeleteBatch()
  const { favoriteAdd } = useFavoriteAddBatch()
  const { favoriteMove } = useFavoriteMoveBatch()
  return (
    <>
      <WatchLaterSelectFilterBtn isSelect={!!ids.length}>
        <WatchLaterFavoriteFolderDialog
          handleConfirm={async (folderId: string | void) => {
            if (!folderId) return
            const { code } = await favoriteAdd({
              videoIds: ids.map((item) => item.videoId),
              folderId,
            })
            if (code) return
            toast('已复制视频')
          }}
          svg={
            <svg
              xmlns='http://www.w3.org/2000/svg'
              viewBox='0 0 16 16'
              width='16'
              height='16'
              className={'mr-1'}
            >
              <path
                d='M2 4C2 2.52724 3.193906666666667 1.3333333333333333 4.666666666666666 1.3333333333333333L9.166666666666666 1.3333333333333333C9.442799999999998 1.3333333333333333 9.666666666666666 1.5571933333333332 9.666666666666666 1.8333333333333333C9.666666666666666 2.1094733333333333 9.442799999999998 2.333333333333333 9.166666666666666 2.333333333333333L4.666666666666666 2.333333333333333C3.7461933333333333 2.333333333333333 3 3.0795266666666667 3 4L3 10.5C3 10.776133333333334 2.77614 11 2.5 11C2.2238599999999997 11 2 10.776133333333334 2 10.5L2 4z'
                fill='currentColor'
              ></path>
              <path
                d='M4 5.333333333333333C4 4.228766666666666 4.895433333333333 3.333333333333333 6 3.333333333333333L11.666666666666666 3.333333333333333C12.771233333333331 3.333333333333333 13.666666666666666 4.228766666666666 13.666666666666666 5.333333333333333L13.666666666666666 10.073933333333333C13.666666666666666 10.6928 13.420833333333334 11.286266666666666 12.983266666666667 11.723866666666666L10.723866666666666 13.983266666666667C10.286266666666666 14.420833333333334 9.692799999999998 14.666666666666666 9.073933333333333 14.666666666666666L6 14.666666666666666C4.895433333333333 14.666666666666666 4 13.771233333333331 4 12.666666666666666L4 5.333333333333333zM6 4.333333333333333C5.447713333333333 4.333333333333333 5 4.781046666666667 5 5.333333333333333L5 12.666666666666666C5 13.218966666666667 5.447713333333333 13.666666666666666 6 13.666666666666666L9.073933333333333 13.666666666666666C9.427533333333333 13.666666666666666 9.7667 13.526166666666665 10.016733333333333 13.276133333333334L12.276133333333334 11.016733333333331C12.526166666666665 10.7667 12.666666666666666 10.427533333333333 12.666666666666666 10.073933333333333L12.666666666666666 5.333333333333333C12.666666666666666 4.781046666666667 12.218966666666667 4.333333333333333 11.666666666666666 4.333333333333333L6 4.333333333333333z'
                fill='currentColor'
              ></path>
              <path
                d='M10.833333333333332 11.166666666666666C10.465133333333332 11.166666666666666 10.166666666666666 11.465133333333334 10.166666666666666 11.833333333333332L10.166666666666666 13.666666666666666C10.166666666666666 13.9428 9.942799999999998 14.166666666666666 9.666666666666666 14.166666666666666C9.390533333333334 14.166666666666666 9.166666666666666 13.9428 9.166666666666666 13.666666666666666L9.166666666666666 11.833333333333332C9.166666666666666 10.912866666666666 9.912866666666666 10.166666666666666 10.833333333333332 10.166666666666666L12.666666666666666 10.166666666666666C12.9428 10.166666666666666 13.166666666666666 10.390533333333334 13.166666666666666 10.666666666666666C13.166666666666666 10.9428 12.9428 11.166666666666666 12.666666666666666 11.166666666666666L10.833333333333332 11.166666666666666z'
                fill='currentColor'
              ></path>
              <path
                d='M6.5 7.166666666666666C6.5 6.890533333333334 6.723873333333334 6.666666666666666 7 6.666666666666666L10.666666666666666 6.666666666666666C10.9428 6.666666666666666 11.166666666666666 6.890533333333334 11.166666666666666 7.166666666666666C11.166666666666666 7.442799999999999 10.9428 7.666666666666666 10.666666666666666 7.666666666666666L7 7.666666666666666C6.723873333333334 7.666666666666666 6.5 7.442799999999999 6.5 7.166666666666666z'
                fill='currentColor'
              ></path>
              <path
                d='M6.5 9.5C6.5 9.223866666666666 6.723873333333334 9 7 9L9 9C9.276133333333332 9 9.5 9.223866666666666 9.5 9.5C9.5 9.776133333333332 9.276133333333332 10 9 10L7 10C6.723873333333334 10 6.5 9.776133333333332 6.5 9.5z'
                fill='currentColor'
              ></path>
            </svg>
          }
          title={'复制'}
          ids={ids}
        />
      </WatchLaterSelectFilterBtn>
      <WatchLaterSelectFilterBtn isSelect={!!ids.length}>
        <WatchLaterFavoriteFolderDialog
          ids={ids}
          handleConfirm={async (folderId: string | void) => {
            if (!folderId) return
            const { code } = await favoriteMove({
              ids: ids.map((item) => item.favoriteId),
              targetFolderId: folderId,
            })
            if (code) return
            toast('已复制视频')
          }}
          svg={
            <svg
              xmlns='http://www.w3.org/2000/svg'
              viewBox='0 0 16 16'
              width='16'
              height='16'
              className={'mr-1'}
            >
              <path
                d='M5.492319999999999 2.3680399999999997C6.167739999999999 2.3347533333333335 6.81268 2.62748 7.24046 3.1408199999999997L7.98448 4.03364C8.1429 4.223753333333333 8.37712 4.33348 8.624293333333332 4.33348L11.9561 4.33348C13.278099999999998 4.33348 14.421199999999999 5.30902 14.5398 6.655293333333333C14.6079 7.42852 14.666799999999999 8.352793333333333 14.666799999999999 9.239719999999998C14.666799999999999 10.0604 14.6164 10.7938 14.5543 11.386099999999999C14.432699999999999 12.5454 13.4987 13.389599999999998 12.3679 13.483799999999999C11.307899999999998 13.572099999999999 9.770719999999999 13.6652 8.00016 13.6652C6.288546666666666 13.6652 4.79504 13.578199999999999 3.739933333333333 13.4926C2.541533333333333 13.395399999999999 1.5923733333333332 12.4685 1.4841799999999998 11.265099999999999C1.40628 10.398599999999998 1.3335 9.25368 1.3335 7.99852C1.3335 6.766499999999999 1.403633333333333 5.64068 1.4798733333333332 4.780253333333333C1.589 3.54864 2.572433333333333 2.6114933333333332 3.7804333333333333 2.4936999999999996C4.32876 2.4402333333333335 4.82804 2.400793333333333 5.492319999999999 2.3680399999999997zM6.47224 3.7809999999999997C6.24036 3.5027399999999997 5.895333333333333 3.3493933333333334 5.5415600000000005 3.366833333333333C4.89492 3.3987133333333333 4.411673333333333 3.436893333333333 3.8774800000000003 3.4889799999999997C3.12556 3.5622999999999996 2.540653333333333 4.1386 2.4759666666666664 4.86852C2.40162 5.70752 2.3335 6.802966666666666 2.3335 7.99852C2.3335 9.216573333333333 2.4042133333333333 10.3307 2.4801599999999997 11.1755C2.544233333333333 11.8882 3.101633333333333 12.4376 3.8207533333333332 12.495899999999999C4.855493333333333 12.5798 6.321353333333333 12.6652 8.00016 12.6652C9.736853333333332 12.6652 11.2456 12.5738 12.2849 12.487199999999998C12.9682 12.430299999999999 13.4914 11.9328 13.5597 11.281799999999999C13.6188 10.7182 13.666799999999999 10.0201 13.666799999999999 9.239719999999998C13.666799999999999 8.3929 13.610299999999999 7.50034 13.5436 6.743033333333333C13.473099999999999 5.942139999999999 12.7896 5.33348 11.9561 5.33348L8.624293333333332 5.33348C8.08004 5.33348 7.56448 5.091693333333334 7.216259999999999 4.673819999999999L6.47224 3.7809999999999997zM9 3C9 2.72386 9.223859999999998 2.5 9.5 2.5L12.833299999999998 2.5C13.109499999999999 2.5 13.333299999999998 2.72386 13.333299999999998 3C13.333299999999998 3.27614 13.109499999999999 3.5 12.833299999999998 3.5L9.5 3.5C9.223859999999998 3.5 9 3.27614 9 3zM6.0000800000000005 8.4834C5.723933333333333 8.4834 5.5000800000000005 8.70726 5.5000800000000005 8.9834C5.5000800000000005 9.25954 5.723933333333333 9.4834 6.0000800000000005 9.4834L8.759473333333332 9.4834L8.198813333333334 10.0441C8.00354 10.2393 8.00354 10.5559 8.198813333333334 10.751199999999999C8.394073333333333 10.946399999999999 8.710646666666666 10.946399999999999 8.905913333333332 10.751199999999999L10.3201 9.336953333333334C10.5154 9.141693333333333 10.5154 8.825113333333332 10.3201 8.629853333333333L8.905913333333332 7.215633333333333C8.710646666666666 7.020373333333333 8.394073333333333 7.020373333333333 8.198813333333334 7.215633333333333C8.00354 7.410893333333332 8.00354 7.72748 8.198813333333334 7.922739999999999L8.759473333333332 8.4834L6.0000800000000005 8.4834z'
                fill='currentColor'
              ></path>
            </svg>
          }
          title={'移动'}
        />
      </WatchLaterSelectFilterBtn>
      <WatchLaterSelectFilterBtn isSelect={!!ids.length}>
        <WatchLaterDialog
          handleConfirm={async () => {
            const { code } = await favoriteDelete({ ids: ids.map((id) => id.favoriteId) })
            if (code) return
            toast('已删除视频')
          }}
          disabled={!ids.length}
          title={'删除选中的视频'}
          svg={
            <svg
              data-v-8617f93c=''
              xmlns='http://www.w3.org/2000/svg'
              viewBox='0 0 16 16'
              width='16'
              height='16'
              className={'mr-1'}
            >
              <path
                d='M5 3.25C5 2.3295266666666663 5.746193333333332 1.5833333333333333 6.666666666666666 1.5833333333333333L9.333333333333332 1.5833333333333333C10.253799999999998 1.5833333333333333 11 2.3295266666666663 11 3.25L11 3.833333333333333C11 4.109473333333333 10.776133333333334 4.333333333333333 10.5 4.333333333333333C10.223866666666666 4.333333333333333 10 4.109473333333333 10 3.833333333333333L10 3.25C10 2.8818133333333336 9.701533333333334 2.583333333333333 9.333333333333332 2.583333333333333L6.666666666666666 2.583333333333333C6.298473333333334 2.583333333333333 6 2.8818133333333336 6 3.25L6 3.833333333333333C6 4.109473333333333 5.77614 4.333333333333333 5.5 4.333333333333333C5.22386 4.333333333333333 5 4.109473333333333 5 3.833333333333333L5 3.25z'
                fill='currentColor'
              ></path>
              <path
                d='M1.3333333333333333 4.166666666666666C1.3333333333333333 3.8905266666666667 1.5571933333333332 3.6666666666666665 1.8333333333333333 3.6666666666666665L14.166666666666666 3.6666666666666665C14.4428 3.6666666666666665 14.666666666666666 3.8905266666666667 14.666666666666666 4.166666666666666C14.666666666666666 4.442806666666666 14.4428 4.666666666666666 14.166666666666666 4.666666666666666L1.8333333333333333 4.666666666666666C1.5571933333333332 4.666666666666666 1.3333333333333333 4.442806666666666 1.3333333333333333 4.166666666666666z'
                fill='currentColor'
              ></path>
              <path
                d='M3.1666666666666665 5.75C3.4428066666666663 5.75 3.6666666666666665 5.973859999999999 3.6666666666666665 6.25L3.6666666666666665 11.603066666666665C3.6666666666666665 12.442166666666667 4.28456 13.130766666666666 5.094706666666666 13.1985C5.950586666666666 13.270033333333332 6.993366666666667 13.333333333333332 8 13.333333333333332C9.006633333333333 13.333333333333332 10.049399999999999 13.270033333333332 10.905299999999999 13.1985C11.715433333333332 13.130766666666666 12.333333333333332 12.442166666666667 12.333333333333332 11.603066666666665L12.333333333333332 6.25C12.333333333333332 5.973859999999999 12.557199999999998 5.75 12.833333333333332 5.75C13.109466666666666 5.75 13.333333333333332 5.973859999999999 13.333333333333332 6.25L13.333333333333332 11.603066666666665C13.333333333333332 12.9358 12.342766666666666 14.081833333333332 10.9886 14.195C10.1174 14.267833333333332 9.044566666666666 14.333333333333332 8 14.333333333333332C6.955433333333333 14.333333333333332 5.882626666666667 14.267833333333332 5.011406666666666 14.195C3.6572266666666664 14.081833333333332 2.6666666666666665 12.9358 2.6666666666666665 11.603066666666665L2.6666666666666665 6.25C2.6666666666666665 5.973859999999999 2.8905266666666667 5.75 3.1666666666666665 5.75z'
                fill='currentColor'
              ></path>
              <path
                d='M6.333333333333333 7C6.60948 7 6.833333333333333 7.223866666666667 6.833333333333333 7.5L6.833333333333333 9.833333333333332C6.833333333333333 10.109466666666666 6.60948 10.333333333333332 6.333333333333333 10.333333333333332C6.057193333333332 10.333333333333332 5.833333333333333 10.109466666666666 5.833333333333333 9.833333333333332L5.833333333333333 7.5C5.833333333333333 7.223866666666667 6.057193333333332 7 6.333333333333333 7z'
                fill='currentColor'
              ></path>
              <path
                d='M9.666666666666666 7C9.942799999999998 7 10.166666666666666 7.223866666666667 10.166666666666666 7.5L10.166666666666666 9.833333333333332C10.166666666666666 10.109466666666666 9.942799999999998 10.333333333333332 9.666666666666666 10.333333333333332C9.390533333333334 10.333333333333332 9.166666666666666 10.109466666666666 9.166666666666666 9.833333333333332L9.166666666666666 7.5C9.166666666666666 7.223866666666667 9.390533333333334 7 9.666666666666666 7z'
                fill='currentColor'
              ></path>
            </svg>
          }
          label={'删除'}
          desc={'视频删除后将不出现在稍后再看中'}
        />
      </WatchLaterSelectFilterBtn>
    </>
  )
}

export default WatchLaterSelectFilterBtnWrapper
